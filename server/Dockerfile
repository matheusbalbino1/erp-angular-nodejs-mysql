FROM node:16.14

# ASSINATURA UNICA PARA O JWT
ENV ASSIGN_JWT=password

# DIRETÓRIO DE TRABALHO NO DOCKER
WORKDIR /app

# COPIAR SEPARADO PARA NÃO INSTALAR TODAS AS DEPENDENCIAS TODA VEZ QUE ALTERAR O CÓDIGO
COPY package*.json ./

RUN npm install

COPY . .

RUN npm run build

CMD node dist/src/index.js

EXPOSE 3000